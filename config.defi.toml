# ChainRank Event Indexer Configuration - DeFi Protocols (L1 Only)
# ═══════════════════════════════════════════════════════════════════════════════
# This configuration focuses on Lending protocols and Yield aggregators on Ethereum mainnet.
# Excludes: Token transfers, DEXes, Staking/Restaking protocols, Base protocols

# Time windows for fetching events
# Each entry is a [year, month] pair
time_periods = [
    [2025, 12],
    [2025, 11],
    [2025, 10],
    [2025, 9],
    [2025, 8],
    [2025, 7],
    [2025, 6],
    [2025, 5],
    [2025, 4],
    [2025, 3],
    [2025, 2],
    [2025, 1],
    [2024, 12],
    [2024, 11],
    [2024, 10],
    [2024, 9],
    [2024, 8],
    [2024, 7],
    [2024, 6],
    [2024, 5],
    [2024, 4],
    [2024, 3],
    [2024, 2],
    [2024, 1],
]

# ═══════════════════════════════════════════════════════════════════════════════
# LENDING PROTOCOLS
# ═══════════════════════════════════════════════════════════════════════════════

# Aave V3 Pool contract
[seed_contracts.aave]
ethereum = "0x87870Bca3F3fD6335C3F4ce8392D69350B4fA4E2"

# Compound V2 cTokens (main markets)
[seed_contracts.compound_ceth]
ethereum = "0x4Ddc2D193948926D02f9B1fE9e1daa0718270ED5"

[seed_contracts.compound_cdai]
ethereum = "0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643"

[seed_contracts.compound_cusdc]
ethereum = "0x39AA39c021dfbaE8faC545936693aC917d5E7563"

[seed_contracts.compound_cusdt]
ethereum = "0xf650C3d88D12dB855b8bf7D11Be6C55A4e07dCC9"

[seed_contracts.compound_cwbtc]
ethereum = "0xccF4429DB6322D5C611ee964527D42E5d685DD6a"

# Compound Comptroller (for COMP distribution events)
[seed_contracts.compound_comptroller]
ethereum = "0x3d9819210A31b4961b30EF54bE2aeD79B9c9Cd3B"

# Compound V3 (Comet) USDC market
[seed_contracts.compound_v3_usdc]
ethereum = "0xc3d688B66703497DAA19211EEdff47f25384cdc3"

# Morpho Blue (Lending)
[seed_contracts.morpho_blue]
ethereum = "0xBBBBBbbBBb9cC5e90e3b3Af64bdAF62C37EEFFCb"

# Spark Protocol (Lending - MakerDAO ecosystem, Aave V3 fork)
[seed_contracts.spark]
ethereum = "0xC13e21B648A5Ee794902342038FF3aDAB66BE987"

# Fluid Liquidity (Lending)
[seed_contracts.fluid]
ethereum = "0x52Aa899454998Be5b000Ad077a46Bbe360F4e497"

# ═══════════════════════════════════════════════════════════════════════════════
# YIELD AGGREGATORS
# ═══════════════════════════════════════════════════════════════════════════════

# Yearn v3 Vaults
[seed_contracts.yearn_usdc]
ethereum = "0xBe53A109B494E5c9f97b9Cd39Fe969BE68BF6204"

[seed_contracts.yearn_weth]
ethereum = "0xc56413869c6CDf96496f2b1eF801fEDBdFA7dDB0"

[seed_contracts.yearn_dai]
ethereum = "0x028eC7330ff87667b6dfb0D94b954c820195336c"

# ═══════════════════════════════════════════════════════════════════════════════
# TOKENS
# ═══════════════════════════════════════════════════════════════════════════════

# USDC Token contract
[seed_contracts.usdc]
ethereum = "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"

# USDT Token contract
[seed_contracts.usdt]
ethereum = "0xdAC17F958D2ee523a2206206994597C13D831ec7"

# WBTC Token contract
[seed_contracts.wbtc]
ethereum = "0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599"

# DAI Token contract
[seed_contracts.dai]
ethereum = "0x6B175474E89094C44Da98b954EedeAC495271d0F"

# WETH Token contract
[seed_contracts.weth]
ethereum = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"

# ═══════════════════════════════════════════════════════════════════════════════
# ALLOWLISTED EVENTS
# ═══════════════════════════════════════════════════════════════════════════════

[allowlisted_events]
aave = [
    "Supply",
    "Withdraw",
    "Borrow",
    "Repay",
    "LiquidationCall"
]
compound_ceth = [
    "Mint",
    "Redeem",
    "CompoundBorrow",
    "RepayBorrow",
    "LiquidateBorrow"
]
compound_cdai = [
    "Mint",
    "Redeem",
    "CompoundBorrow",
    "RepayBorrow",
    "LiquidateBorrow"
]
compound_cusdc = [
    "Mint",
    "Redeem",
    "CompoundBorrow",
    "RepayBorrow",
    "LiquidateBorrow"
]
compound_cusdt = [
    "Mint",
    "Redeem",
    "CompoundBorrow",
    "RepayBorrow",
    "LiquidateBorrow"
]
compound_cwbtc = [
    "Mint",
    "Redeem",
    "CompoundBorrow",
    "RepayBorrow",
    "LiquidateBorrow"
]
compound_comptroller = [
    "DistributedSupplierComp",
    "DistributedBorrowerComp"
]
compound_v3_usdc = [
    "CometSupply",
    "CometWithdraw",
    "SupplyCollateral",
    "WithdrawCollateral"
]
morpho_blue = [
    "MorphoSupply",
    "MorphoWithdraw",
    "MorphoBorrow",
    "MorphoRepay",
    "MorphoLiquidate"
]
spark = [
    "Supply",
    "Withdraw",
    "Borrow",
    "Repay",
    "LiquidationCall"
]
fluid = [
    "FluidOperate"
]
yearn_usdc = [
    "YearnDeposit",
    "YearnWithdraw"
]
yearn_weth = [
    "YearnDeposit",
    "YearnWithdraw"
]
yearn_dai = [
    "YearnDeposit",
    "YearnWithdraw"
]
usdc = [
    "Transfer"
]
usdt = [
    "Transfer"
]
wbtc = [
    "Transfer"
]
dai = [
    "Transfer"
]
weth = [
    "Transfer"
]

# ═══════════════════════════════════════════════════════════════════════════════
# OUTPUT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

[output]
raw_folder = "raw"
file_format = "csv"

# ═══════════════════════════════════════════════════════════════════════════════
# INDEXER SETTINGS
# ═══════════════════════════════════════════════════════════════════════════════

[indexer]
batch_size = 2000
max_retries = 3
retry_delay_seconds = 1
rate_limit_per_second = 10
parallel_batches = 10
parallel_requests = 100
save_interval_batches = 10

# ═══════════════════════════════════════════════════════════════════════════════
# TRUST CALCULATION WEIGHTS (per protocol)
# ═══════════════════════════════════════════════════════════════════════════════
# Formula: trust = max(0, log2(amount) * event_weight)

# Aave V3 trust weights
[trust_weights.aave]
# Positive trust signals (trust building)
Supply = 1.0                          # Baseline - capital commitment
Repay = 1.5                           # Highest trust - fulfilled debt obligation
LiquidationCall_liquidator = 1.2      # Maintains protocol health

# Neutral / context-dependent signals
Borrow = 0.4                          # Creates debt - trust depends on repayment
Withdraw = 0.3                        # Normal behavior, reduces commitment

# Negative trust signals (trust reducing)
LiquidationCall_liquidated = -1.5     # Failed position management

# Compound V2 trust weights (applied to all cToken markets)
[trust_weights.compound_ceth]
Mint = 1.0                            # Deposit ETH, receive cETH
RepayBorrow = 1.5                     # Fulfilled debt obligation
LiquidateBorrow_liquidator = 1.2      # Maintains protocol health
CompoundBorrow = 0.4                  # Creates debt
Redeem = 0.3                          # Withdraw funds
LiquidateBorrow_liquidated = -1.5     # Failed position management

[trust_weights.compound_cdai]
Mint = 1.0
RepayBorrow = 1.5
LiquidateBorrow_liquidator = 1.2
CompoundBorrow = 0.4
Redeem = 0.3
LiquidateBorrow_liquidated = -1.5

[trust_weights.compound_cusdc]
Mint = 1.0
RepayBorrow = 1.5
LiquidateBorrow_liquidator = 1.2
CompoundBorrow = 0.4
Redeem = 0.3
LiquidateBorrow_liquidated = -1.5

[trust_weights.compound_cusdt]
Mint = 1.0
RepayBorrow = 1.5
LiquidateBorrow_liquidator = 1.2
CompoundBorrow = 0.4
Redeem = 0.3
LiquidateBorrow_liquidated = -1.5

[trust_weights.compound_cwbtc]
Mint = 1.0
RepayBorrow = 1.5
LiquidateBorrow_liquidator = 1.2
CompoundBorrow = 0.4
Redeem = 0.3
LiquidateBorrow_liquidated = -1.5

[trust_weights.compound_comptroller]
DistributedSupplierComp = 0.5         # COMP rewards for supplying
DistributedBorrowerComp = 0.5         # COMP rewards for borrowing

# Compound V3 (Comet) trust weights
[trust_weights.compound_v3_usdc]
CometSupply = 1.0                     # Supply base asset
CometWithdraw = 0.3                   # Withdraw base asset
SupplyCollateral = 1.0                # Supply collateral
WithdrawCollateral = 0.3              # Withdraw collateral

# Morpho Blue trust weights
[trust_weights.morpho_blue]
MorphoSupply = 1.0                    # Deposit collateral
MorphoRepay = 1.5                     # Fulfilled debt obligation
MorphoLiquidate_liquidator = 1.2      # Maintains protocol health
MorphoBorrow = 0.4                    # Creates debt
MorphoWithdraw = 0.3                  # Withdraw funds
MorphoLiquidate_liquidated = -1.5     # Failed position management

# Spark Protocol trust weights (same as Aave V3)
[trust_weights.spark]
Supply = 1.0                          # Deposit collateral
Repay = 1.5                           # Fulfilled debt obligation
LiquidationCall_liquidator = 1.2      # Maintains protocol health
Borrow = 0.4                          # Creates debt
Withdraw = 0.3                        # Withdraw funds
LiquidationCall_liquidated = -1.5     # Failed position management

# Fluid Liquidity trust weights
[trust_weights.fluid]
FluidOperate_supply = 1.0             # Deposit assets
FluidOperate_withdraw = 0.3           # Withdraw assets
FluidOperate_repay = 1.5              # Repay debt
FluidOperate_borrow = 0.4             # Borrow assets

# Yearn v3 trust weights
[trust_weights.yearn_usdc]
YearnDeposit = 1.0                    # User deposits into vault
YearnWithdraw = 0.3                   # User withdraws from vault

[trust_weights.yearn_weth]
YearnDeposit = 1.0                    # User deposits into vault
YearnWithdraw = 0.3                   # User withdraws from vault

[trust_weights.yearn_dai]
YearnDeposit = 1.0                    # User deposits into vault
YearnWithdraw = 0.3                   # User withdraws from vault

# Token transfer trust weights
[trust_weights.usdc]
Transfer = 0.8                        # USDC transfer activity

[trust_weights.usdt]
Transfer = 0.8                        # USDT transfer activity

[trust_weights.wbtc]
Transfer = 0.9                        # WBTC transfer activity (higher value)

[trust_weights.dai]
Transfer = 0.8                        # DAI transfer activity

[trust_weights.weth]
Transfer = 0.8                        # WETH transfer activity

# ═══════════════════════════════════════════════════════════════════════════════
# TRUST OUTPUT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

[trust_output]
trust_folder = "trust"
ens_verification_multiplier = 2.0
fc_verification_multiplier = 2.0
wrld_verification_multiplier = 2.0
